<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>For Evan â€” Bouquet</title>
<style>
  :root{--bg:#fff6f8;--accent:#d63384;--shadow: rgba(10,10,20,0.08)}
  html,body{height:100%;margin:0;background:var(--bg);display:flex;align-items:center;justify-content:center;font-family:Inter,system-ui,Arial;}
  .wrap{width:760px; padding:18px; box-sizing:border-box}
  .card{width:700px;height:720px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff6f8);box-shadow:0 18px 40px var(--shadow);display:flex;flex-direction:column;align-items:center;padding:18px;position:relative}
  h1{margin:8px 0 0 0;font-size:18px;color:#3a2b33}
  .name{color:var(--accent);font-size:28px;font-weight:700;margin:6px 0}
  .hint{color:#6b7280;text-align:center;margin:6px 0}
  button{margin-top:10px;padding:10px 14px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:#fff;cursor:pointer}
  /* fixed-size SVG, centered and stable */
  svg{display:block; margin:8px auto 0 auto; width:700px; height:520px; border-radius:6px}
  svg *{ transform-box:fill-box; transform-origin:center; }
  .petal{filter:drop-shadow(0 6px 10px rgba(0,0,0,0.06)); transition:transform 260ms ease}
  .flower:hover .petal{ transform:scale(1.03) }
  .stem{stroke:#2b6b3a; stroke-width:5; stroke-linecap:round; fill:none}
  .flower{ cursor:default } /* no popups */
  .heart{ position:fixed; pointer-events:none; z-index:1100 }
  .final-message{
    margin-top:12px;
    font-size:18px;
    color:#35272f;
    text-align:center;
    padding:12px 18px;
    border-radius:10px;
    background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,238,245,0.6));
    box-shadow: 0 6px 18px rgba(10,10,20,0.04);
    width:640px;
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
      <!-- fixed-size SVG: viewBox matches drawn coordinates (0..700 x 0..520) -->
      <svg id="svg" viewBox="0 0 700 520" xmlns="http://www.w3.org/2000/svg" aria-label="Fixed roses">
        <defs>
          <radialGradient id="p1" cx="30%" cy="30%"><stop offset="0%" stop-color="#ffdfe6"/><stop offset="60%" stop-color="#ff7f9a"/><stop offset="100%" stop-color="#d64b6d"/></radialGradient>
          <radialGradient id="p2" cx="30%" cy="30%"><stop offset="0%" stop-color="#fff1e6"/><stop offset="60%" stop-color="#ff9aa6"/><stop offset="100%" stop-color="#d45b78"/></radialGradient>
          <radialGradient id="cG" cx="40%" cy="40%"><stop offset="0%" stop-color="#fff8d8"/><stop offset="100%" stop-color="#ffd166"/></radialGradient>
          <linearGradient id="vG" x1="0" x2="0" y1="0" y2="1"><stop offset="0%" stop-color="#fff"/><stop offset="100%" stop-color="#ffeef6"/></linearGradient>
        </defs>

        <!-- vase placed near bottom center of 700x520 -->
        <g transform="translate(350,420)">
          <ellipse cx="0" cy="30" rx="150" ry="22" fill="rgba(0,0,0,0.06)"/>
          <path d="M-120 8 C-90 120 90 120 120 8 L100 180 C50 210 -50 210 -100 180 Z" fill="url(#vG)"/>
        </g>

        <!-- FIVE flower groups -->
        <!-- far-left -->
        <g class="flower" transform="translate(70,210)" data-name="fl1" aria-label="rose">
          <path class="stem" d="M0 6 C -8 80 -10 230 120 260"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(-48)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(12)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(72)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(132)"/>
          <circle cx="0" cy="-8" r="8" fill="url(#cG)"/>
        </g>

        <!-- left -->
        <g class="flower" transform="translate(170,200)" data-name="left" aria-label="rose">
          <path class="stem" d="M0 6 C -8 80 -10 220 120 260"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(-48)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(12)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(72)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(132)"/>
          <circle cx="0" cy="-8" r="8" fill="url(#cG)"/>
        </g>

        <!-- center -->
        <g class="flower" transform="translate(350,170)" data-name="center" aria-label="rose">
          <path class="stem" d="M0 10 C -6 120 -14 240 0 300"/>
          <ellipse class="petal" rx="48" ry="28" cx="0" cy="-36" fill="url(#p2)" transform="rotate(-48)"/>
          <ellipse class="petal" rx="48" ry="28" cx="0" cy="-36" fill="url(#p1)" transform="rotate(12)"/>
          <ellipse class="petal" rx="48" ry="28" cx="0" cy="-36" fill="url(#p2)" transform="rotate(72)"/>
          <ellipse class="petal" rx="48" ry="28" cx="0" cy="-36" fill="url(#p1)" transform="rotate(132)"/>
          <circle cx="0" cy="-10" r="12" fill="url(#cG)"/>
        </g>

        <!-- right -->
        <g class="flower" transform="translate(530,200)" data-name="right" aria-label="rose">
          <path class="stem" d="M0 6 C -6 80 -30 220 -120 260"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(-48)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(12)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(72)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(132)"/>
          <circle cx="0" cy="-8" r="8" fill="url(#cG)"/>
        </g>

        <!-- far-right -->
        <g class="flower" transform="translate(630,210)" data-name="fl5" aria-label="rose">
          <path class="stem" d="M0 6 C -6 80 -30 230 -120 260"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(-48)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(12)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p1)" transform="rotate(72)"/>
          <ellipse class="petal" rx="36" ry="20" cx="0" cy="-28" fill="url(#p2)" transform="rotate(132)"/>
          <circle cx="0" cy="-8" r="8" fill="url(#cG)"/>
        </g>

      </svg>

      <h1>For</h1>
      <div class="name" id="recipient">Evan</div>
      <p class="hint">Clicking roses is disabled â€” enjoy the bouquet. The Surprise button still makes hearts!</p>

      <button id="surprise">Surprise Now</button>

      <div class="final-message" id="finalMessage">
        For Evan, will you be my valentine?
      </div>
    </div>
  </div>

<script>
  // simplified: no popups. Keep hearts/spawn behavior for Surprise button.
  const svg = document.getElementById('svg');
  const recipient = "Evan";
  document.getElementById('recipient').textContent = recipient;

  // helper: convert svg coords -> client coords
  function svgToClient(sx, sy){
    const pt = svg.createSVGPoint(); pt.x = sx; pt.y = sy;
    const ctm = svg.getScreenCTM();
    if(!ctm) return {x:sx,y:sy};
    return pt.matrixTransform(ctm);
  }

  // spawn hearts from svg point (sx, sy)
  function spawnHearts(sx, sy, count=10){
    const client = svgToClient(sx, sy);
    for(let i=0;i<count;i++){
      const el = document.createElement('div');
      el.className = 'heart';
      el.textContent = ['â¤','ðŸ’—','ðŸ’•'][Math.floor(Math.random()*3)];
      document.body.appendChild(el);
      const size = 12 + Math.random()*26; el.style.fontSize = size + 'px';
      const left = client.x + (Math.random()*80 - 40);
      const top = client.y + (Math.random()*30 - 8);
      el.style.left = left + 'px'; el.style.top = top + 'px';
      const dx = (Math.random()*120 - 60); const dy = -(120 + Math.random()*80);
      el.animate([
        {transform:'translate(0,0) scale(1)', opacity:1},
        {transform:`translate(${dx}px,${dy}px) scale(.85)`, opacity:0}
      ], {duration:1400 + Math.random()*800, easing:'cubic-bezier(.2,.9,.3,1)'});
      setTimeout(()=> el.remove(), 1800 + Math.random()*900);
    }
  }

  // Surprise button: spawn from the center flower location
  document.getElementById('surprise').addEventListener('click', ()=>{
    // find center flower's position (data-name="center")
    const centerG = svg.querySelector('[data-name="center"]');
    // compute its bounding box center in screen pixels
    const bbox = centerG.getBBox();
    // group transform is translate(sx,sy) â€” we can read it from the 'transform' attribute
    const transformAttr = centerG.getAttribute('transform') || 'translate(350,170)';
    // parse translate(x,y)
    const match = transformAttr.match(/translate\(\s*([-\d.]+)[ ,]+([-\d.]+)\s*\)/);
    let sx = 350, sy = 170;
    if(match){
      sx = parseFloat(match[1]);
      sy = parseFloat(match[2]);
    }
    // use the group's translate coordinates as spawn origin
    spawnHearts(sx, sy, 18);
  });

  // accessibility: keyboard trigger for Surprise (space/enter when focused)
  document.getElementById('surprise').addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); e.target.click(); }
  });
</script>
</body>
</html>
